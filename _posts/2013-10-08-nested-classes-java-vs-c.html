---
layout: post
title: 'Nested classes: Java vs C#'
date: 2013-10-08 19:38:00.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Code
tags: []
meta:
  restapi_import_id: 586b47d26eba1
  original_post_id: '20'
  _wp_old_slug: '20'
  _edit_last: '14213986'
  _publicize_job_id: '4017016939'
author:


  display_name: ngeor
  first_name: Nikolaos
  last_name: Georgiou
---
<p>So I have started reading up on Java. Getting reacquainted with that old friend. Playing with swing components on the UI editor of NetBeans. Reliving the horror of having to declare every exception your method might throw. The ugliness of the XML DOM API. object.setNumber(object.getNumber() + 1) and so on and so on.</p>
<p>But still, it is nice to read up again. I bought a few books. The guilt list of books that I need to reed because I bought them keeps on growing! Currently I&#039;m reading (slowly, my free time is mostly occupied by fitness these days) Core Java Volume I. It&#039;s very basic, but I&#039;m resisting and I don&#039;t skip through. Even in those basic chapters you can find things that surprise you, that you never really knew, that you forgot, and so on.</p>
<p>I ran into such a thing yesterday, it has to do with nested classes (or inner classes). Both Java and C# support something like this:</p>
<p>[code]<br />
public class MainClass<br />
{<br />
    private int _value;<br />
    private InnerClass _child;</p>
<p>    public MainClass()<br />
    {<br />
        _child = new InnerClass();<br />
    }</p>
<p>    private class InnerClass<br />
    {<br />
    }<br />
}<br />
[/code]</p>
<p>There&#039;s a MainClass that has an InnerClass. In both languages, the inner class has access to all the private fields and methods of the MainClass.</p>
<p>However, in the typical scenario, there is a parent-child relationship between a specific MainClass instance that creates and owns one or more instances of the InnerClass. So, even though InnerClass instances are allowed by the language to access the private members of <em>any</em> MainClass instance, in the typical scenario these instances are really interested in accessing the private members of the <em>particular</em> instance that created them (their parent, their owner object).</p>
<p>In C#, that means I have to write a bit more boilerplate code in order to express that relationship:</p>
<p>[code]<br />
public class MainClass<br />
{<br />
    private int _value;<br />
    private InnerClass _child;</p>
<p>    public MainClass()<br />
    {<br />
        _child = new InnerClass(this);<br />
    }</p>
<p>    private class InnerClass<br />
    {<br />
        private readonly MainClass _owner;</p>
<p>        public InnerClass(MainClass owner)<br />
        {<br />
            _owner = owner;<br />
        }</p>
<p>        public void PrintValue()<br />
        {<br />
            Console.WriteLine("The private value is {0}.", _owner._value);<br />
        }<br />
    }<br />
}<br />
[/code]</p>
<p>In Java, that parent - child relationship was considered (I suppose) much more important (or common) so it was promoted to a language feature. The inner class instance has an implicit reference to the outer instance. That means I don&#039;t need the explicit constructor and whatnot:</p>
<p>[code]<br />
public class MainClass {<br />
    private int _value;<br />
    private InnerClass _child;</p>
<p>    public MainClass() {<br />
        _child = new InnerClass();<br />
    }</p>
<p>    private class InnerClass {<br />
        public void printValue() {<br />
            System.out.printf("The private value is %dn.", _value);<br />
        }<br />
    }<br />
}<br />
[/code]</p>
<p>That&#039;s pretty sweet! I can just reference the private field and it knows it is about the outer <em>instance</em>.</p>
<p>When I read this last night, I started wondering: why have I not been implementing my .NET code like that? Is is possible that .NET supports this and I&#039;ve been a fool all this time not knowing it? Well, at least as it turned out I wasn&#039;t doing it wrong :)</p>
